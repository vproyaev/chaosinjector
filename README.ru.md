# ChaosInjector üöÄ

üá∫üá∏ [English](README.md) | üá∑üá∫ [–†—É—Å—Å–∫–∏–π](README.ru.md)

### Community and Support

üì¢ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∞–≤—Ç–æ—Ä—Å–∫–æ–º—É
Telegram-–∫–∞–Ω–∞–ª—É [@almost_it](https://t.me/almost_it) –¥–ª—è insights –ø–æ
—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–∞ Python, –æ–±—Å—É–∂–¥–µ–Ω–∏–π chaos engineering, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏
–∑–∞–∫—É–ª–∏—Å–Ω—ã—Ö –º—ã—Å–ª–µ–π –æ–± –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è.

[![PyPI version](https://badge.fury.io/py/chaosinjector.svg)](https://badge.fury.io/py/chaosinjector)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

[![Downloads](https://pepy.tech/badge/chaosinjector)](https://pepy.tech/project/chaosinjector)

**–í–Ω–µ–¥—Ä—è–π—Ç–µ —Ö–∞–æ—Å, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å ‚Äì —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ —Å–≤–æ–π –∫–æ–¥
–Ω–∞ Python —Å –ø–æ–º–æ—â—å—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏!**

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –ª—é–±–æ–π –æ–±—ä–µ–∫—Ç Python –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π —Ü–µ–Ω—Ç—Ä —Å–∏–ª—ã:
–º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ "—Å–±–æ—è—Ç" —Å–ª—É—á–∞–π–Ω–æ, –ª–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–±–æ—Ä–æ—á–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è, —Ç–µ—Å—Ç—ã,
–∏–º–∏—Ç–∏—Ä—É—é—â–∏–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–±–æ–∏ –±–µ–∑ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –º–æ–∫–∏–Ω–≥–∞. **ChaosInjector** ‚Äì —ç—Ç–æ
ultimate-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, —Å—Ç—Ä–µ–º—è—â–∏—Ö—Å—è –∫ –¥–∏–Ω–∞–º–∏—á–Ω–æ–º—É, —É—Å—Ç–æ–π—á–∏–≤–æ–º—É –∏
–∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ–º—É –∫–æ–¥—É. –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, —É–∫—Ä–µ–ø–ª—è–µ—Ç–µ –ª–∏ –≤—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤
–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Å–µ–º–ø–ª–∏–Ω–≥ –∏–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ
—Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å –≤ —Å–∏–º—É–ª—è—Ü–∏–∏ –∏ –∏–≥—Ä—ã ‚Äì ChaosInjector –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –ø—Ä–æ—Å—Ç—ã–º –∏ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–º.

–ó–∞—á–µ–º –¥–æ–≤–æ–ª—å—Å—Ç–≤–æ–≤–∞—Ç—å—Å—è —Å—Ç–∞—Ç–∏—á–Ω—ã–º –∫–æ–¥–æ–º, –∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Ö–∞–æ—Å?
–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Ä—è–¥–∞–º –¥–∞–ª—å–Ω–æ–≤–∏–¥–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö ChaosInjector
–¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–≤–µ–¥–µ–Ω–∏—è –ò–ò –∏ –º–Ω–æ–≥–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ. *
*–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ–π—á–∞—Å –∏ —Ä–∞—Å–∫—Ä–æ–π—Ç–µ —Å–∏–ª—É –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏!**

## –ü–æ—á–µ–º—É ChaosInjector? üî•

–í –º–∏—Ä–µ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º ChaosInjector –¥–∞—ë—Ç –≤–∞–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:

- **–ò–Ω—ä–µ–∫—Ü–∏—è —Å–±–æ–µ–≤ –Ω–∞ —Å—Ç–µ—Ä–æ–∏–¥–∞—Ö**: –°–∏–º—É–ª–∏—Ä—É–π—Ç–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  –∏–ª–∏ API –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π ‚Äì –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–∞–¥—ë–∂–Ω—ã—Ö unit- –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.
- **–ú–∞–≥–∏—è —Å–µ–º–ø–ª–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –°–Ω–∏–∂–∞–π—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ,
  —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –∏–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É, –≤—ã–ø–æ–ª–Ω—è—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –≤ X% —Å–ª—É—á–∞–µ–≤.
- **–°—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–º—É–ª—è—Ü–∏–∏**: –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å –≤ –∏–≥—Ä—ã,
  –º–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –∏–ª–∏ –º–µ—Ç–æ–¥—ã –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏.
- **–£–ø—Ä–æ—â—ë–Ω–Ω–æ–µ A/B-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–Ω–µ–¥—Ä—è–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ, –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π
  –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
- **–£—Å–∏–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ê–Ω–æ–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –¥–æ—Å—Ç—É–ø—ã –∫
  —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º —Å–ª—É—á–∞–π–Ω–æ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ—Ä–º–∞–º –∏ —Å–æ–∑–¥–∞–Ω–∏—è honeypot.

–ü–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–∞–≥–∏–∏ Python (–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –≤ runtime
—á–µ—Ä–µ–∑ `__getattribute__`), ChaosInjector –ª—ë–≥–∫–∏–π, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ
–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ ‚Äì —ç—Ç–æ –≤–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π
–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±–æ–ª–µ–µ —É–º–Ω–æ–≥–æ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç ‚ö°

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ù–∞—á–Ω–∏—Ç–µ –∑–∞ —Å–µ–∫—É–Ω–¥—ã:

```bash
pip install chaosinjector
```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ? –õ–µ–≥–∫–æ!

```python
import logging
from chaosinjector import ChaosInjector


logger = logging.getLogger("my_app")
ChaosInjector.inject(
    logger, probability=0.1
)  # –¢–æ–ª—å–∫–æ 10% —à–∞–Ω—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤

logger.info("–≠—Ç–æ—Ç –ª–æ–≥ –º–æ–∂–µ—Ç –Ω–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è!")  # –ù–µ—É—Å—Ç–æ–π—á–∏–≤–æ –ø–æ –¥–∏–∑–∞–π–Ω—É!
```

–ù—É–∂–µ–Ω –±–æ–ª—å—à–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å? –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ decider –∏–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø–æ –º–µ—Ç–æ–¥–∞–º:

```python
ChaosInjector.inject(
    logger, method_probs={"info": 0.0, "error": 1.0}
)  # Info –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è, –æ—à–∏–±–∫–∏ –≤—Å–µ–≥–¥–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
```

–ò–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—É—é –ª–æ–≥–∏–∫—É:

```python
ChaosInjector.inject(
    logger, decider=lambda name: "debug" not in name
)  # –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã —Å 'debug'
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ –±–µ–∑ –º—É—Ç–∞—Ü–∏–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞

–î–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º,
–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `create_proxy`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Å —Ö–∞–æ—Å–æ–º, —Å–æ—Ö—Ä–∞–Ω—è—è
—Ç–∏–ø–∏–∑–∞—Ü–∏—é:

```python
import logging
from chaosinjector import ChaosInjector


original_logger = logging.getLogger("my_app")
chaos_logger = ChaosInjector.create_proxy(original_logger, probability=0.1)

chaos_logger.info("–≠—Ç–æ—Ç –ª–æ–≥ flaky –≤ –ø—Ä–æ–∫—Å–∏!")  # 10% —à–∞–Ω—Å –≤ –ø—Ä–æ–∫—Å–∏
original_logger.info("–≠—Ç–æ—Ç –ª–æ–≥ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!")  # –û—Ä–∏–≥–∏–Ω–∞–ª –Ω–µ—Ç—Ä–æ–Ω—É—Ç
```

## –§—É–Ω–∫—Ü–∏–∏ –≤–∫—Ä–∞—Ç—Ü–µ üåü

- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º**: –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤/–º–µ—Ç–æ–¥–æ–≤ —Å
  –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é (0.0-1.0).
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ decider**: –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ callable –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø–æ –∞—Ç—Ä–∏–±—É—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä,
  –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏).
- **–ì—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—å –ø–æ –º–µ—Ç–æ–¥–∞–º**: –°–ª–æ–≤–∞—Ä—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è
  —Ç–æ—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ no-op**: –í—ã–∑—ã–≤–∞–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ç–∏—Ö–∏–º–∏ lambda;
  –Ω–µ –≤—ã–∑—ã–≤–∞–µ–º—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç None ‚Äì –±–µ–∑ –∫—Ä–∞—à–µ–π!
- **–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π (0-1),
  –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è silent-–æ—à–∏–±–∫–∏.
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏**: –ü—Ä–æ–∫—Å–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç isinstance-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å
  –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º —Ç–∏–ø–æ–º, –≤–∫–ª—é—á–∞—è generics –∏ type hints.
- **–î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã**: In-place –º—É—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ `inject` –∏–ª–∏ –Ω–µ–¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–π
  –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ `create_proxy`.
- **–õ—ë–≥–∫–∏–π –∏ —á–∏—Å—Ç—ã–π Python**: –ë–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Å–æ–≤–º–µ—Å—Ç–∏–º —Å Python 3.8+.
- **–¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: 100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Å pytest, –≤–∫–ª—é—á–∞—è –º–æ–∫–∏–Ω–≥
  —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º–∞.

## –ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞ üí°

### 1. –ò–Ω—ä–µ–∫—Ü–∏—è —Å–±–æ–µ–≤ –≤ —Ç–µ—Å—Ç–∞—Ö

–°–∏–º—É–ª–∏—Ä—É–π—Ç–µ –Ω–µ–Ω–∞–¥—ë–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:

```python
import requests
from chaosinjector import ChaosInjector


session = requests.Session()
ChaosInjector.inject(session, probability=0.3)  # 70% —à–∞–Ω—Å —Å–±–æ—è

response = session.get(
    "https://api.example.com"
)  # –ß–∞—Å—Ç–æ None ‚Äì —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ—Ç—Ä–∞–∏!
```

–ò–ª–∏ –±–µ–∑ –º—É—Ç–∞—Ü–∏–∏:

```python
chaos_session = ChaosInjector.create_proxy(session, probability=0.3)
response = chaos_session.get("https://api.example.com")  # Flaky —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ–∫—Å–∏
```

### 2. –°–µ–º–ø–ª–∏–Ω–≥ –¥–æ—Ä–æ–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É:

```python
from opentelemetry import trace
from chaosinjector import ChaosInjector


tracer = trace.get_tracer(__name__)
ChaosInjector.inject(
    tracer, probability=0.1
)  # –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –≤ 10% —Å–ª—É—á–∞–µ–≤

with tracer.start_as_current_span("operation"):  # –ò–Ω–æ–≥–¥–∞ no-op
    pass
```

–° –ø—Ä–æ–∫—Å–∏:

```python
chaos_tracer = ChaosInjector.create_proxy(tracer, probability=0.1)
with chaos_tracer.start_as_current_span(
    "operation"
):  # Flaky –≤ –ø—Ä–æ–∫—Å–∏, –æ—Ä–∏–≥–∏–Ω–∞–ª intact
    pass
```

### 3. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π –ò–ò –≤ –∏–≥—Ä–∞—Ö

–î–æ–±–∞–≤—å—Ç–µ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å:

```python
class NPC:
    def attack(self):
        print("Boom!")


npc = NPC()
ChaosInjector.inject(
    npc, method_probs={"attack": 0.7}
)  # –ê—Ç–∞–∫–∞ –≤ 70% —Å–ª—É—á–∞–µ–≤

npc.attack()  # –ú–æ–∂–µ—Ç –±—ã—Ç—å... –º–æ–∂–µ—Ç –Ω–µ—Ç!
```

–° –ø—Ä–æ–∫—Å–∏:

```python
chaos_npc = ChaosInjector.create_proxy(npc, method_probs={"attack": 0.7})
chaos_npc.attack()  # Flaky –≤ –ø—Ä–æ–∫—Å–∏, –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π npc —Å—Ç–∞–±–∏–ª–µ–Ω
```

### 4. –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ê–Ω–æ–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:

```python
class UserData:
    user_id = "sensitive123"


data = UserData()
ChaosInjector.inject(
    data, decider=lambda name: name != "user_id"
)  # user_id –≤—Å–µ–≥–¥–∞ None

print(data.user_id)  # None ‚Äì –∑–∞—â–∏—â–µ–Ω–æ!
```

–° –ø—Ä–æ–∫—Å–∏:

```python
chaos_data = ChaosInjector.create_proxy(
    data, decider=lambda name: name != "user_id"
)
print(chaos_data.user_id)  # None –≤ –ø—Ä–æ–∫—Å–∏, –æ—Ä–∏–≥–∏–Ω–∞–ª –Ω–µ—Ç—Ä–æ–Ω—É—Ç
```

–ò–∑—É—á–∏—Ç–µ –±–æ–ª—å—à–µ –≤ –Ω–∞—à–µ–π [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://chaosinjector.readthedocs.io) (
—Å–∫–æ—Ä–æ)!

## –í–∫–ª–∞–¥ ü§ù

–õ—é–±–∏—Ç–µ ChaosInjector? –ü–æ–º–æ–≥–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å! –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –¥–æ–±–∞–≤—å—Ç–µ
—Ñ—É–Ω–∫—Ü–∏–∏/—Ç–µ—Å—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ pull request.

- –°–æ–æ–±—â–∞–π—Ç–µ –æ–±
  –æ—à–∏–±–∫–∞—Ö: [GitHub Issues](https://github.com/vproyaev/chaosinjector/issues)
- –ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é: ‚≠êÔ∏è
- –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –Ω–∞—Å: –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤ X –∏–ª–∏ Reddit!

## –õ–∏—Ü–µ–Ω–∑–∏—è üìÑ

–í—ã–ø—É—â–µ–Ω–æ –ø–æ–¥ [MIT License](LICENSE). –°–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∏
—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–π—Ç–µ.

---

**–ì–æ—Ç–æ–≤—ã –≤–Ω–µ–¥—Ä–∏—Ç—å —Ö–∞–æ—Å –≤ —Å–≤–æ–π –∫–æ–¥?** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ChaosInjector —Å–µ–≥–æ–¥–Ω—è –∏
–ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç–µ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å –≤ —Å—É–ø–µ—Ä—Å–∏–ª—É. –í–æ–ø—Ä–æ—Å—ã? –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –≤ issues ‚Äì –º—ã
–ø–æ–º–æ–∂–µ–º! üöÄ